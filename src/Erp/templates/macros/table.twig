{% macro displaySortableHeader(context, fieldName) %}
    {% set fieldsSorting = attribute(attribute(context.areaCookie, context.subject), 'sorting') ?? null %}
    {% set sorting = null %}
    {% for fieldSorting in fieldsSorting %}
        {% if fieldSorting[0] == fieldName %}
            {% set sorting = fieldSorting %}
        {% endif %}
    {% endfor %}
    {# field sorting is not set  #}
    {% if sorting == null %}
        {% set buttonClass = 'icon-sort text-muted' %}
        {% set reverseDirection = 'asc' %}
    {% else %}
    {# field sorting is set  #}
        {% set direction = sorting[1]|lower %}
        {% set buttonClass = 'icon-sorted-%s'|format(direction) %}
        {% set reverseDirection = direction == 'asc' ? 'desc' : 'asc' %}
    {% endif %}
    {% set buttonTitle = attribute(context.tableLabels, 'sort-%s'|format(reverseDirection)) %}
<th>
    <div class="d-flex align-items-center">
        <span>
            {{ attribute(context.fieldsLabels, fieldName) }}
        </span>
        <form action="" method="post">
            <input type="hidden" name="modifier" value="sort">
            <input type="hidden" name="field" value="{{ fieldName }}">
            <input type="hidden" name="direction" value="{{ reverseDirection }}">
            <button type="submit" class="{{ buttonClass }}" title="{{ buttonTitle }}"></button>
        </form>
    </div>
</th>
{% endmacro %}
